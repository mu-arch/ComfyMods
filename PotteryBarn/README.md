# PotteryBarn

*Public build extension that adds existing game prefabs to the Hammer.*

## Instructions

  * New prefabs (that exist in the game) will be available to build!
  * You might need to pick-up/drop a stone/wood/resource to have the recipe trigger.

### Demister Update

  * Vanilla wisp torches have a range of 10m

| Demister              | Range | Blue Mushrooms | Wisps |
|-----------------------|-------|----------------|-------|
| dvergr_demister       | 15    | 8              | 20    |
| dvergr_demister_large | 30    | 30             | 50    |

### Dvergr Piece Update

| Category    | Prefab                            | Crafting Station | Resource           | Resource           | Resource         | Resource |
|-------------|-----------------------------------|------------------|--------------------|--------------------|------------------|----------|
| Building    | blackmarble_head01                | Black forge      | 4x Copper          |                    |                  |          |
| Building    | blackmarble_head02                | Black forge      | 4x Copper          |                    |                  |          |
| Building    | metalbar_1x2                      | Black forge      | 8x Copper          |                    |                  |          |
| Building    | blackmarble_2x2_enforced          | Black forge      | 8x Black marble    | 4x Copper          |                  |          |
| Building    | blackmarble_out_2                 | Stonecutter      | 8x Black marble    |                    |                  |          |
| Building    | blackmarble_slope_1x2             | Stonecutter      | 3x Black marble    |                    |                  |          |
| Building    | blackmarble_tile_floor_1x1        | Stonecutter      | 2x Black marble    |                    |                  |          |
| Building    | blackmarble_tile_floor_2x2        | Stonecutter      | 4x Black marble    |                    |                  |          |
| Building    | blackmarble_tile_wall_2x4         | Stonecutter      | 8x Black marble    |                    |                  |          |
| Building    | blackmarble_base_2                | Stonecutter      | 10x Black marble   |                    |                  |          |
| Building    | blackmarble_column_3              | Stonecutter      | 24x Black marble   |                    |                  |          |
| Building    | blackmarble_floor_large           | Stonecutter      | 80x Black marble   |                    |                  |          |
| Building    | blackmarble_head_big01            | Stonecutter      | 8x Black marble    |                    |                  |          |
| Building    | blackmarble_head_big02            | Stonecutter      | 8x Black marble    |                    |                  |          |
| Building    | dvergrprops_wood_floor            | Workbench        | 2x Yggdrasil wood  |                    |                  |          |
| Building    | dvergrprops_wood_stair            | Workbench        | 2x Yggdrasil wood  |                    |                  |          |
| Building    | piece_dvergr_pole                 | Black forge      | 2x Yggdrasil wood  | 1x Copper          |                  |          |
| Building    | piece_dvergr_wood_door            | Black forge      | 12x Yggdrasil wood | 12x Copper         |                  |          |
| Building    | piece_dvergr_wood_wall            | Black forge      | 10x Yggdrasil wood | 5x Copper          |                  |          |
| Building    | dvergrprops_banner                | Workbench        | 2x Yggdrasil wood  | 4x Blue jute       |                  |          |
| Building    | dvergrprops_curtain               | Workbench        | 2x Yggdrasil wood  | 4x Blue jute       |                  |          |
| Building    | dvergrprops_wood_beam             | Workbench        | 12x Yggdrasil wood |                    |                  |          |
| Building    | dvergrprops_wood_pole             | Black Forge      | 8x Yggdrasil wood  | 4x Copper          |                  |          |
| Building    | dvergrprops_wood_stake            | Black Forge      | 2x Yggdrasil wood  | 1x Iron            |                  |          |
| Building    | dvergrprops_wood_wall             | Black Forge      | 32x Yggdrasil Wood | 16x Copper         |                  |          |
| Building    | dvergrtown_stair_corner_wood_left | Black Forge      | 6x Yggdrasil Wood  | 3x Copper          |                  |          |
| Building    | dvergrprops_lantern_standing      | Black Forge      | 1x Lantern         |                    |                  |          |
| CreatorShop | trade_wagon_destructable          | Black Forge      | 10x Blue mushroom  | 50x Yggdrasil wood | 80x Bronze nails | 10x Tar  |
| Building    | dvergrprops_hooknchain            | Black Forge      | 5x Iron            | 10x Copper         |                  |          |

### Creator Shop Items

| Category    | Prefab                  | Crafting Station | Resource          | Resource           | Resource           | Resource     | Resource          |
|-------------|-------------------------|------------------|-------------------|--------------------|--------------------|--------------|-------------------|
| CreatorShop | goblin_banner           | Workbench        | 1x Blue mushroom  | 2x Finewood        | 2x Bone fragments  | 2x bloodbags | 6x Leather scraps |
| CreatorShop | goblin_fence            | Workbench        | 1x Blue mushroom  | 4x Wood            | 8x Bone fragments  |              |                   |
| CreatorShop | goblin_pole             | Workbench        | 1x Blue mushroom  | 2x Wood            | 4x Bone fragments  |              |                   |
| CreatorShop | goblin_pole_small       | Workbench        | 1x Blue mushroom  | 1x Wood            | 2x Bone fragments  |              |                   |
| CreatorShop | goblin_roof_45d         | Workbench        | 1x Blue mushroom  | 2x Wood            | 8x Bone fragments  | 2x Deer hide |                   |
| CreatorShop | goblin_roof_45d_corner  | Workbench        | 1x Blue mushroom  | 2x Wood            | 8x Bone fragments  | 2x Deer hide |                   |
| CreatorShop | goblin_roof_cap         | Workbench        | 4x Blue mushroom  | 10x Wood           | 12x Bone fragments | 6x Deer hide |                   |
| CreatorShop | goblin_stairs           | Workbench        | 1x Blue mushroom  | 2x Wood            | 4x Bone fragments  |              |                   |
| CreatorShop | goblin_stepladder       | Workbench        | 1x Blue mushroom  | 2x Wood            | 4x Bone fragments  |              |                   |
| CreatorShop | goblin_woodwall_1m      | Workbench        | 1x Blue mushroom  | 2x Wood            | 4x Bone fragments  |              |                   |
| CreatorShop | goblin_woodwall_2m      | Workbench        | 1x Blue mushroom  | 4x Wood            | 8x Bone fragments  |              |                   |
| CreatorShop | goblin_woodwall_2m_ribs | Workbench        | 1x Blue mushroom  | 4x Wood            | 8x Bone fragments  |              |                   |
| CreatorShop | GlowingMushroom         | Workbench        | 1x Blue mushroom  | 3x Yellow mushroom |                    |              |                   |
| CreatorShop | root07                  | Workbench        | 2x Ancient bark   |                    |                    |              |                   |
| CreatorShop | root08                  | Workbench        | 2x Ancient bark   |                    |                    |              |                   |
| CreatorShop | root11                  | Workbench        | 2x Ancient bark   |                    |                    |              |                   |
| CreatorShop | root12                  | Workbench        | 2x Ancient bark   |                    |                    |              |                   |
| CreatorShop | Skull1                  | Workbench        | 1x Blue mushroom  | 10x Bone fragments |                    |              |                   |
| CreatorShop | Skull2                  | Workbench        | 10x Blue mushroom | 50x Bone fragments |                    |              |                   |
| CreatorShop | StatueCorgi             | Stonecutter      | 5x Blue mushroom  | 20x Stone          |                    |              |                   |
| CreatorShop | StatueDeer              | Stonecutter      | 5x Blue mushroom  | 20x Stone          |                    |              |                   |
| CreatorShop | StatueEvil              | Stonecutter      | 5x Blue mushroom  | 20x Stone          |                    |              |                   |
| CreatorShop | StatueHare              | Stonecutter      | 5x Blue mushroom  | 20x Stone          |                    |              |                   |
| CreatorShop | StatueSeed              | Stonecutter      | 5x Blue mushroom  | 20x Stone          |                    |              |                   |
| CreatorShop | stonechest              | Stonecutter      | 10x Blue mushroom | 20x Stone          |                    |              |                   |
| CreatorShop | Vines                   | Workbench        | 2x Wood           |                    |                    |              |                   |

### Creator Shop Functionality

  * Player may only break down creator shop places they have placed themselves.
  * This is to ensure world generated items cannot be broken down for mats farming.
  * World generated pieces will drop the same vanilla material drop table when broken with attacks/damage.

### Hammer

| Category  | Prefab            | Crafting Station | Resource     | Resource        | Resource |
|-----------|-------------------|------------------|--------------|-----------------|----------|
| Building  | Stone Floor 4x4   | Stonecutter      | 12x Stone    |                 |          |
| Building  | turf_roof         | Workbench        | 2x Wood      |                 |          |
| Building  | turf_roof_top     | Workbench        | 2x Wood      |                 |          |
| Building  | turf_roof_wall    | Workbench        | 2x Wood      |                 |          |
| Furniture | ArmorStand_Female | Workbench        | 8x Fine Wood | 2x Bronze Nails | 4x Tar   |
| Furniture | ArmorStand_Male   | Workbench        | 8x Fine Wood | 2x Bronze Nails | 4x Tar   |
| Furniture | wood_ledge        | Workbench        | 1x Wood      |                 |          |

### Changing the ArmorStand pose

  * The new ArmorStands have 15 different poses available!
  * There is a `Change Pose` switch at the base of the stand.
  * PotteryBarn fixes the error that prevents changing poses in vanilla.

### Notes

  * See source at: [GitHub/ComfyMods](https://github.com/redseiko/ComfyMods/tree/main/PotteryBarn).
  * Looking for a chill Valheim server? [Comfy Valheim Discord](https://discord.gg/ameHJz5PFk)
  * Check out our community driven listing site at: [valheimlist.org](https://valheimlist.org/)
  * PotteryBarn icon created by [@jenniely](https://twitter.com/jenniely) (jenniely.com)

### Dependencies

  * [Jotunn-v2.13.0](https://valheim.thunderstore.io/package/ValheimModding/Jotunn/)

## Changelog

### 1.11.0

  * Updated for Jotunn dependency version update to `v2.13.0`.
  * Now hooks into `PieceManager.OnPiecesRegistered` event for adding pieces.

### 1.10.1

  * Removed demister ball since it is untargetable and cannot be deconstructed by players

### 1.10.0

  * Fixed comfort on Female armor stand

### 1.9.0

  * Added demisters to the creatorshop

### 1.8.0

  * Updated for `v0.217.14` patch.
  * Fixed the `Player.SetupPlacementGhost` transpiler patch and made it more robust for future patches.
  * Removed the `ArmorStand` patch as it's no longer needed.
  * Code clean-up and refactoring.
  * Created helper class `ReflectionUtils` and method `GetGenericMethod`.

### 1.7.0

  * Updated for `v0.216.9` patch.
  * Removed left-over logging statements (oops).
  * Code clean-up.

### 1.6.2

  * Fixed additional bug in drop behavior.

### 1.6.1

  * Fixed small bug in drop behavior.

### 1.6.0

  * Added dvergr pieces.
  * World generated pieces will have the same drop rate as vanilla if destroyed with damage or the build hammer.
  * Player constructed pieces will return recipe costs and may be broken by other players (not just the creator) for any
    items not on the CreatorShop tab.

### 1.5.1

  * Added an `EffectList.Create()` prefix patch to disable any enabled 'null' effectData.m_prefabs.
  * Updated mod icon to a new one created by [@jenniely](https://twitter.com/jenniely).

### 1.5.0

  * Moved 'Vines' and 'GlowingMushroom' to Cultivator under custom 'CreatorShop' category.
  * Added support for showing categories to Cultivator.
  * Code-clean up and refactoring.
  * Updated JVL dependency to `v2.10.4`.

### 1.4.0

  * Fixed for `v0.211.9` patch.
  * Added `BepInDependency` and `manifest.json` dependency to JVL.
  * Removed `yield return null` from `AddHammerPieces` coroutine.

### 1.3.0

  * CreatorShop changes?

### 1.2.1

  * Actually include the updated `README.md` in the packaged file *sigh*.

### 1.2.0

  * Added more prefabs to the Hammer PieceTable.
  * Added `ArmorStand.SetPose()` prefix patch to eliminate NRE preventing pose changes.
  * Extracted patch-related code to new classes.
  * Extracted configuration-related code to `PluginConfig` class.

### 1.1.0

  * Added `manifest.json`, changed the `icon.png` and updated this `README.md`.
  * Modified the project file to automatically create a versioned Thunderstore package.

### 1.0.1

  * Reduced cost for Stone Floor 4x4 prefab from 24 stone to 12 stone.

### 1.0.0

  * Initial release.
  * Added Stone Floor 4x4 prefab to the Hammer's "Building" Options. 